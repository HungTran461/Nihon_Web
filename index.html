<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nihongo Cute - H·ªçc Ti·∫øng Nh·∫≠t</title>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&family=Nunito:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="logo">
            <i class="fas fa-torii-gate"></i> Nihongo<span style="color:var(--primary)">Cute</span>
        </div>
        <nav>
            <ul>
                <li><a href="#" onclick="closeSection()">Trang ch·ªß</a></li>
                <li><a href="#" onclick="openLeaderboard()">üèÜ B·∫£ng x·∫øp h·∫°ng</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero" id="heroSection">
        <div class="mascot-container">
            <div class="mascot-circle">
                <img src="Image/Rabbit_3.jpg" class="mascot-img" alt="Mascot">
            </div>
        </div>
        <h1>H·ªçc Ti·∫øng Nh·∫≠t th·∫≠t vui!</h1>
        <p>Kh√°m ph√° Hiragana, Katakana v√† Kanji.</p>
    </section>

    <div class="container">
        
        <div class="card-grid" id="mainMenu">
            <div class="card" onclick="openSection('kanaSection')">
                <div class="card-icon"><i class="fas fa-font"></i></div>
                <h3>B·∫£ng Ch·ªØ C√°i</h3>
                <p>HoÃ£c baÃâng ch∆∞ÃÉ Hi-Ka</p>
                <div class="card-badge">C∆° b·∫£n</div>
            </div>

            <div class="card" onclick="openSection('vocabSection')">
                <div class="card-icon"><i class="fas fa-book-open"></i></div>
                <h3>T·ª´ v·ª±ng</h3>
                <p>T·ª´ v∆∞Ã£ng theo baÃÄi</p>
                <div class="card-badge">N√™ÃÄn taÃâng</div>
            </div>

            <div class="card" onclick="openSection('grammarSection')">
                <div class="card-icon"><i class="fas fa-book-reader"></i></div>
                <h3>Ng·ªØ ph√°p</h3>
                <p>C√¢ÃÅu truÃÅc ng∆∞ÃÉ phaÃÅp</p>
                <div class="card-badge">N√™ÃÄn taÃâng</div>
            </div>

            <div class="card" onclick="openSection('kanjiSection')">
                <div class="card-icon"><i class="fas fa-pen-nib"></i></div>
                <h3>H√°n T·ª± - B√¥Ã£ thuÃâ</h3>
                <p>HoÃ£c b√¥Ã£ thuÃâ vaÃÄ Kanji</p>
                <div class="card-badge">N√¢ng cao</div>
            </div>

            <div class="card" onclick="openSection('exerciseSection')">
                <div class="card-icon"><i class="fas fa-pencil-alt"></i></div>
                <h3>B√†i t·∫≠p</h3>
                <p>CuÃâng c√¥ÃÅ baÃÄi hoÃ£c</p>
                <div class="card-badge">Ki√™Ãâm tra</div>
            </div>

            <div class="card" onclick="openSection('kaiwaSection')">
                <div class="card-icon"><i class="fas fa-comments"></i></div>
                <h3>H·ªôi tho·∫°i</h3>
                <p>Luy·ªán nghe & n√≥i</p>
                <div class="card-badge">Hay</div>
            </div>

            <div class="card" onclick="openSection('gameSection')">
                <div class="card-icon"><i class="fas fa-book"></i></div>
                <h3>Luy·ªán T·∫≠p</h3>
                <p>Ch∆∞ÃÅc nƒÉng h√¥ÃÉ tr∆°Ã£</p>
                <div class="card-badge">HOT</div>
            </div>
        </div>

        <div id="kanaSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-star" style="color:var(--accent)"></i> B·∫£ng Ch·ªØ C√°i</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

            <div class="kana-tabs">
                <button class="tab-btn active" onclick="switchTab('hiragana', event)">Hiragana („Å≤„Çâ„Åå„Å™)</button>
                <button class="tab-btn" onclick="switchTab('katakana', event)">Katakana („Ç´„Çø„Ç´„Éä)</button>
            </div>

            <div class="kana-grid" id="gridContainer"></div>
        </div>

        <div id="vocabSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-book" style="color:var(--accent)"></i> T·ª´ v·ª±ng Minna</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>
            
            <div class="lesson-control-bar">
                <label for="lessonSelect">Ch·ªçn b√†i h·ªçc:</label>
                <div class="select-wrapper">
                    <select id="lessonSelect" onchange="changeLesson()">
                        <optgroup label="Gi√°o tr√¨nh Minna">
                        <option value="1">Minna B√†i 1</option>
                        <option value="2">Minna B√†i 2</option>
                    </optgroup>

                    <optgroup label="Saiba (B·ªï tr·ª£)">
                        <option value="school">ƒê·ªì v·∫≠t trong tr∆∞·ªùng</option>
                        <option value="toilet">ƒê·ªì d√πng nh√† v·ªá sinh</option>
                        <option value="time">Th·ªùi gian & Gi·ªù gi·∫•c</option>
                        <option value="week">Th·ª© trong tu·∫ßn</option>
                        <option value="number">S·ªë ƒë·∫øm</option>
                        <option value="age">Tu·ªïi t√°c</option>
                    </optgroup>
                    </select>
                </div>
            </div>

            <div class="table-scroll-wrapper">
                
                <div class="vocab-table-header">
                    <div class="col-header">Kanji</div>
                    <div class="col-header">Hiragana/Katakana</div>
                    <div class="col-header">√ù nghƒ©a</div>
                    <div class="col-header">Nghe</div>
                </div>

                <div id="vocabListContainer" class="vocab-list-container">
                    </div>

            </div> </div>

        <div id="kanjiSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-fire" style="color:var(--accent)"></i> H√°n T·ª± & B·ªô Th·ªß</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

            <div class="kana-tabs">
                <button class="tab-btn active" onclick="switchKanjiTab('radicals', event)">214 B·ªô Th·ªß</button>
                <button class="tab-btn" onclick="switchKanjiTab('n5', event)">Kanji N5 (85 ch·ªØ)</button>
            </div>

            <div id="kanjiListContainer" class="kanji-grid-container">
                </div>
        </div>

        <div id="gameSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-book" style="color:var(--accent)"></i> Luy√™Ã£n t√¢Ã£p</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

           <div class="kana-tabs">
                <button class="tab-btn active" onclick="switchGameTab('flashcard', event)">Flashcard</button>
                <button class="tab-btn" onclick="switchGameTab('quiz', event)">Tr·∫Øc nghi·ªám</button>
                <button class="tab-btn" onclick="switchGameTab('reflex', event)">‚ö° Ph·∫£n x·∫°</button>
            </div>

            <div id="gameFlashcardArea">
                <div class="practice-controls">
                    <label>Ch·ªçn b·ªô th·∫ª:</label>
                    <div class="select-wrapper">
                        <select id="flashcardDeck" onchange="initFlashcards()">
                            <!-- Nh√≥m Sabai -->
                            <optgroup label="Saiba (T·ª´ v·ª±ng b·ªï sung)">
                                <option value="extra_school">ƒê·ªì v·∫≠t trong tr∆∞·ªùng</option>
                                <option value="extra_toilet">ƒê·ªì d√πng nh√† v·ªá sinh</option>
                                <option value="extra_time">Th·ªùi gian & Gi·ªù gi·∫•c</option>
                                <option value="extra_week">Th·ª© trong tu·∫ßn</option>
                                <option value="extra_number">S·ªë ƒë·∫øm</option> <option value="extra_age">Tu·ªïi t√°c</option>   
                            </optgroup>
                            <!-- Nh√≥m Minna -->
                            <optgroup label="Gi√°o tr√¨nh Minna">
                                <option value="minna_1">Minna B√†i 1</option>
                                <option value="minna_2">Minna B√†i 2</option>
                            </optgroup>

                            <!-- Nh√≥m Hiragana -->
                            <optgroup label="Hiragana (B·∫£ng m·ªÅm)">
                                <option value="hira_basic">Hiragana (C∆° b·∫£n)</option>
                                <option value="hira_daku">Hiragana (Bi·∫øn √¢m)</option>
                                <option value="hira_yoon">Hiragana (·∫¢o √¢m)</option>   <!-- ƒê√£ th√™m -->
                                <option value="hira_full">Hiragana (T·ªîNG H·ª¢P)</option> <!-- ƒê√£ th√™m -->
                            </optgroup>

                            <!-- Nh√≥m Katakana -->
                            <optgroup label="Katakana (B·∫£ng c·ª©ng)">
                                <option value="kata_basic">Katakana (C∆° b·∫£n)</option>
                                <option value="kata_daku">Katakana (Bi·∫øn √¢m)</option>
                                <option value="kata_yoon">Katakana (·∫¢o √¢m)</option>   <!-- ƒê√£ th√™m -->
                                <option value="kata_full">Katakana (T·ªîNG H·ª¢P)</option> <!-- ƒê√£ th√™m -->
                            </optgroup>

                            <!-- Nh√≥m Kanji -->
                            <optgroup label="H√°n T·ª±">
                                <option value="n5_kanji">Kanji N5</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <div class="flashcard-container">
                    <div class="flashcard" onclick="flipCard()">
                        <div class="flashcard-inner" id="flashcardInner">
                            <div class="flashcard-front">
                                <div class="fc-main" id="fcFrontMain">ÁßÅ</div>
                                <div class="fc-sub" id="fcFrontSub">„Çè„Åü„Åó</div>
                                <div class="fc-hint"><i class="fas fa-sync-alt"></i> Ch·∫°m ƒë·ªÉ l·∫≠t</div>
                            </div>
                            <div class="flashcard-back">
                                <div class="fc-mean" id="fcBackMean">T√¥i</div>
                                <div class="fc-audio-btn" onclick="playFlashcardAudio(event)">
                                    <i class="fas fa-volume-up"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flashcard-nav">
                    <button class="btn-nav" onclick="prevCard()"><i class="fas fa-chevron-left"></i> Tr∆∞·ªõc</button>
                    <span id="fcCounter">1 / 20</span>
                    <button class="btn-nav" onclick="nextCard()">Sau <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <div id="gameQuizArea" style="display:none;">

                <div id="quizSetup" class="quiz-setup-box">
                    <h3>C·∫•u h√¨nh b√†i thi</h3>
                    <div class="quiz-config-grid">
                        <div class="config-item">
                            <label>Ch·ªß ƒë·ªÅ:</label>
                            <select id="quizTopic">
                                <option value="minna_1">Minna B√†i 1</option>
                                <option value="minna_2">Minna B√†i 2</option>
                                <optgroup label="Saiba (T·ª´ v·ª±ng b·ªï sung)">
                                    <option value="extra_school">ƒê·ªì v·∫≠t trong tr∆∞·ªùng</option>
                                    <option value="extra_toilet">ƒê·ªì d√πng nh√† v·ªá sinh</option>
                                    <option value="extra_time">Th·ªùi gian & Gi·ªù gi·∫•c</option>
                                    <option value="extra_week">Th·ª© trong tu·∫ßn</option>
                                    <option value="extra_number">S·ªë ƒë·∫øm</option> <option value="extra_age">Tu·ªïi t√°c</option>   
                                </optgroup>
                                <optgroup label="Hiragana">
                                    <option value="hira_basic">Hiragana (C∆° b·∫£n)</option>
                                    <option value="hira_daku">Hiragana (Bi·∫øn √¢m)</option> 
                                    <option value="hira_yoon">Hiragana (·∫¢o √¢m)</option>   
                                    <option value="hira_full">Hiragana (T·ªîNG H·ª¢P)</option> 
                                </optgroup>
                                <optgroup label="Katakana">
                                    <option value="kata_basic">Katakana (C∆° b·∫£n)</option>
                                    <option value="kata_daku">Katakana (Bi·∫øn √¢m)</option> 
                                    <option value="kata_yoon">Katakana (·∫¢o √¢m)</option>   
                                    <option value="kata_full">Katakana (T·ªîNG H·ª¢P)</option> 
                                </optgroup>
                                <option value="n5_kanji">Kanji N5</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>S·ªë c√¢u h·ªèi:</label>
                            <select id="quizCount">
                                <option value="5">5 c√¢u</option>
                                <option value="10" selected>10 c√¢u</option>
                                <option value="20">20 c√¢u</option>
                                <option value="30">30 c√¢u</option>
                                <option value="40">40 c√¢u</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Th·ªùi gian/c√¢u:</label>
                            <select id="quizTime">
                                <option value="3">3 gi√¢y (Si√™u khoÃÅ)</option>
                                <option value="5">5 gi√¢y (Kh√≥)</option>
                                <option value="10" selected>10 gi√¢y (V·ª´a)</option>
                                <option value="15">15 gi√¢y (D·ªÖ)</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>S·ªë ƒë√°p √°n:</label>
                            <select id="quizOptionsCount">
                                <option value="2">2 ƒë√°p √°n</option>
                                <option value="3">3 ƒë√°p √°n</option>
                                <option value="4" selected>4 ƒë√°p √°n</option>
                                <option value="6">6 ƒë√°p √°n</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn-start-quiz" onclick="startQuiz()">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
                </div>

                <div id="quizPlay" style="display:none;">
                    <div class="quiz-header-bar">
                        <div class="quiz-progress">C√¢u: <span id="quizCurrent">1</span>/<span id="quizTotal">10</span></div>
                        <div class="quiz-score-live">ƒêi·ªÉm: <span id="quizScoreLive">0</span></div>
                    </div>
                    
                    <div class="timer-container">
                        <div class="timer-bar" id="timerBar"></div>
                    </div>

                    <div class="question-box">
                        <div class="question-text" id="quizQuestion">?</div>
                    </div>

                    <div class="options-grid" id="quizOptions">
                        </div>

                    <button class="btn-end-early" onclick="endQuizEarly()">
                        <i class="fas fa-flag-checkered"></i> N·ªôp b√†i ngay
                    </button>
                </div>

                <div id="quizResult" style="display:none;">
                    <div class="result-summary">
                        <div class="result-score-circle" id="finalScore">8/10</div>
                        <h3>K·∫øt qu·∫£ b√†i l√†m</h3>
                        <button class="btn-restart" onclick="resetQuizInfo()">Tr∆°Ãâ laÃ£i</button>
                    </div>

                    <div class="result-details" id="resultDetailsList">
                        </div>
                </div>

            </div>
            <div id="gameReflexArea" style="display:none;">
                <div id="reflexSetup" class="game-controls">
                    <label>1. Ch·ªçn b·∫£ng ch·ªØ</label>
                    <div class="select-wrapper">
                        <select id="reflexTopic">
                            <optgroup label="Hiragana (Ch·ªØ m·ªÅm)">
                                <option value="hira_basic">√Çm C∆° B·∫£n („ÅÇ, „ÅÑ, „ÅÜ...)</option>
                                <option value="hira_daku">Bi·∫øn √¢m („Åå, „Åñ, „Å†...)</option>
                                <option value="hira_yoon">·∫¢o √¢m („Åç„ÇÉ, „Åó„ÇÉ...)</option>
                                <option value="hira_full">T·∫•t c·∫£ Hiragana</option>
                            </optgroup>

                            <optgroup label="Katakana (Ch·ªØ c·ª©ng)">
                                <option value="kata_basic">√Çm C∆° B·∫£n („Ç¢, „Ç§, „Ç¶...)</option>
                                <option value="kata_daku">Bi·∫øn √¢m („Ç¨, „Ç∂, „ÉÄ...)</option>
                                <option value="kata_yoon">·∫¢o √¢m („Ç≠„É£, „Ç∑„É£...)</option>
                                <option value="kata_full">T·∫•t c·∫£ Katakana</option>
                            </optgroup>

                            <optgroup label="T·ªïng h·ª£p (Mix)">
                                <option value="mix_full">Tr·ªôn c·∫£ 2 b·∫£ng (Si√™u kh√≥)</option>
                            </optgroup>
                        </select>
                    </div>

                    <label style="margin-top:15px">2. T·ªëc ƒë·ªô chuy·ªÉn</label>
                    <div class="select-wrapper">
                        <select id="reflexSpeed">
                            <option value="3000">Si√™u ch·∫≠m (3 gi√¢y)</option>
                            <option value="2000">Ch·∫≠m (2 gi√¢y)</option>
                            <option value="1000" selected>B√¨nh th∆∞·ªùng (1 gi√¢y)</option>
                            <option value="800">Nhanh (0.8 gi√¢y)</option>
                            <option value="500">Si√™u t·ªëc (0.5 gi√¢y)</option>
                        </select>
                    </div>

                    <button class="btn-start" onclick="startReflexGame()">
                        <i class="fas fa-bolt"></i> B·∫Øt ƒë·∫ßu luy·ªán
                    </button>
                </div>

                <div id="reflexPlay" style="display:none; text-align:center;">
                    <div class="reflex-card">
                        <div id="reflexChar" class="reflex-char">„ÅÇ</div>
                        <div id="reflexRomaji" class="reflex-romaji">a</div>
                    </div>

                    <button class="btn-stop" onclick="stopReflexGame()">
                        <i class="fas fa-stop"></i> D·ª´ng l·∫°i
                    </button>
                </div>
            </div>
        </div>

        <div id="charModal" class="modal-overlay">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal()">&times;</button>
                
                <div class="modal-body">
                    <div class="modal-left">
                        <div class="big-char" id="modalChar">Â≠ó</div>
                        <div class="romaji-tag" id="modalRomaji">JI</div> <button onclick="playAudioFromModal()" class="btn-audio-large">
                            <i class="fas fa-volume-up"></i> Nghe
                        </button>

                        <div class="stroke-order-container">
                            <p>Th·ª© t·ª± n√©t vi·∫øt:</p>
                            <div class="stroke-box-static">
                                <img id="strokeImage" src="" alt="..." onerror="this.src='https://via.placeholder.com/150?text=No+Data'">
                            </div>
                        </div>
                    </div>

                    <div class="modal-right">
                        <div id="kanjiReadings" style="display:none; margin-bottom: 15px;">
                            <div class="reading-row">
                                <span class="reading-label label-onyomi">√Çm On:</span>
                                <span id="modalOnyomi" class="reading-content">-</span>
                            </div>
                            <div class="reading-row">
                                <span class="reading-label label-kunyomi">√Çm Kun:</span>
                                <span id="modalKunyomi" class="reading-content">-</span>
                            </div>
                        </div>

                        <h3><i class="fas fa-lightbulb"></i> Nghƒ©a & T·ª´ v·ª±ng:</h3>
                        <ul class="example-list" id="modalExamples">
                            </ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="grammarSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-magic" style="color:var(--accent)"></i> Ng·ªØ ph√°p</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

            <div class="kana-tabs">
                <button class="tab-btn active" onclick="switchGrammarTab('1', event)">B√†i 1</button>
                <button class="tab-btn" onclick="switchGrammarTab('2', event)">B√†i 2</button>
            </div>

            <div id="grammarListContainer" class="grammar-container">
                </div>
        </div>
        <div id="exerciseSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-edit" style="color:var(--accent)"></i> B√†i t·∫≠p th·ª±c h√†nh</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

            <div class="kana-tabs">
                <button id="btn-bai-1" class="tab-btn" onclick="switchExerciseTab('1')">B√†i 1</button>
                <button id="btn-bai-2" class="tab-btn" onclick="switchExerciseTab('2')">B√†i 2</button>
            </div>

            <div id="exerciseContainer" class="exercise-wrapper">
                </div>

            <div class="exercise-footer">
                <button class="btn-check-answer" onclick="checkExerciseResult()">
                    <i class="fas fa-check-circle"></i> Ch·∫•m ƒëi·ªÉm
                </button>
                <div id="exerciseScore" class="exercise-score"></div>
            </div>
        </div>
        <div id="kaiwaSection" class="section-content">
            <div class="section-header">
                <h2><i class="fas fa-comments" style="color:var(--accent)"></i> H·ªôi tho·∫°i Kaiwa</h2>
                <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
            </div>

            <div class="kana-tabs">
                <button class="tab-btn active" onclick="switchKaiwaTab('1', event)">B√†i 1</button>
                <button class="tab-btn" onclick="switchKaiwaTab('2', event)">B√†i 2</button>
            </div>

            <div id="kaiwaSubNav" class="kaiwa-sub-nav">
                </div>

            <div class="kaiwa-illustration">
                <img id="kaiwaImage" src="" alt="Kaiwa Image">
                <div class="audio-player-wrapper" id="kaiwaAudioPlayer">
                    <audio id="kaiwaAudio"></audio> 
                    <button id="btnKaiwaAudio" class="btn-audio-player" onclick="toggleKaiwaAudio()">
                        <div class="icon-play"><i class="fas fa-play" id="kaiwaAudioIcon"></i></div>
                        <span id="kaiwaAudioText">Nghe CD</span>
                    </button>
                </div>
            </div>

            <div id="kaiwaContainer" class="kaiwa-chat-box"></div>
        </div>
    </div>
    <section id="leaderboardSection" class="section-content" style="display:none;">
        <div class="section-header">
            <h2><i class="fas fa-trophy" style="color: #f1c40f;"></i> B·∫£ng v√†ng th√†nh t√≠ch</h2>
            <button class="btn-back" onclick="closeSection()"><i class="fas fa-arrow-left"></i> Quay l·∫°i</button>
        </div>

        <div class="leaderboard-container">
            <div class="my-rank-card">
                <div class="rank-avatar">üê∞</div>
                <div class="rank-info">
                    <h3>Th·ª© h·∫°ng c·ªßa b·∫°n</h3>
                    <p id="myRankName">Th·ªè T·∫≠p S·ª±</p>
                </div>
                <div class="rank-score">
                    <span id="myTotalScore">0</span> PTS
                </div>
                <button class="btn-reset-score" onclick="resetMyScore()" title="X√≥a ƒëi·ªÉm v·ªÅ 0">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>

            <div class="ranking-list" id="rankingList">
                </div>
        </div>
    </section>
    <footer>
        <p>¬© 2025 Nihongo Cute. H·ªçc m·ªói ng√†y nh√©!</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>